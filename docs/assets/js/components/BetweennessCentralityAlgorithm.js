(function(u,w){typeof exports=="object"&&typeof module<"u"?module.exports=w(require("react")):typeof define=="function"&&define.amd?define(["react"],w):(u=typeof globalThis<"u"?globalThis:u||self,u.BetweennessCentralityAlgorithm=w(u.React))})(this,function(u){"use strict";var w={exports:{}},P={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q=u,z=Symbol.for("react.element"),B=Symbol.for("react.fragment"),V=Object.prototype.hasOwnProperty,L=Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,W={key:!0,ref:!0,__self:!0,__source:!0};function D(h,x,v){var b,g={},y=null,j=null;v!==void 0&&(y=""+v),x.key!==void 0&&(y=""+x.key),x.ref!==void 0&&(j=x.ref);for(b in x)V.call(x,b)&&!W.hasOwnProperty(b)&&(g[b]=x[b]);if(h&&h.defaultProps)for(b in x=h.defaultProps,x)g[b]===void 0&&(g[b]=x[b]);return{$$typeof:z,type:h,key:y,ref:j,props:g,_owner:L.current}}P.Fragment=B,P.jsx=D,P.jsxs=D,w.exports=P;var e=w.exports;return()=>{var q,C,T,$,A,E,R,F;const h={0:[1,2],1:[0,2,3],2:[0,1,4],3:[1,4],4:[2,3]},x={0:{x:100,y:50},1:{x:50,y:150},2:{x:150,y:150},3:{x:100,y:250},4:{x:200,y:200}},[v,b]=u.useState(0),[g,y]=u.useState("initial"),[j,N]=u.useState("disabled"),[ee,I]=u.useState(0),[o,k]=u.useState({}),O=()=>{const s=Object.keys(h).length,n=v,c=Array(s).fill(-1),m=Array(s).fill(-1),l=Array(s).fill(-1),i={};return c[n]=0,m[n]=1,l[0]=n,{d:c,w:m,q:l,paths:i,p_r:0,p_w:1,s:n,currentNode:null,currentNeighbor:null,neighborIndex:0,stepType:"queue_check",completed:!1,stepDescriptions:[]}};u.useEffect(()=>{k(O()),I(0),y("ready"),N("disabled"),_({})},[v]);const J=()=>{const s={...o},{d:n,w:c,q:m,paths:l,p_r:i,p_w:a,s:r}=s;if(Object.keys(h).length,s.stepType==="queue_check")i===a?(s.completed=!0,s.stepDescriptions.push(`Queue empty (p_r=${i} == p_w=${a}). Part 1 complete.`),y("completed"),N("ready")):(s.currentNode=m[i],s.p_r=i+1,s.neighborIndex=0,s.stepType="process_neighbors",s.stepDescriptions.push(`Dequeue node ${s.currentNode} (p_r now ${s.p_r})`));else if(s.stepType==="process_neighbors"){const d=s.currentNode,p=h[d];if(s.neighborIndex<p.length){const t=p[s.neighborIndex];s.currentNeighbor=t,n[t]===-1?(n[t]=n[d]+1,c[t]=c[d],l[t]=[d],m[a]=t,s.p_w=a+1,s.stepDescriptions.push(`Neighbor ${t}: first visit, d[${t}]=${n[t]}, w[${t}]=${c[t]}, paths[${t}]=[${d}], enqueue`)):n[t]===n[d]+1?(c[t]=c[t]+c[d],l[t]=[...l[t]||[],d],s.stepDescriptions.push(`Neighbor ${t}: same distance, w[${t}]=${c[t]}, paths[${t}]=[${l[t].join(",")}]`)):s.stepDescriptions.push(`Neighbor ${t}: longer path, do nothing`),s.neighborIndex++}else s.currentNeighbor=null,s.stepType="queue_check",s.stepDescriptions.push(`Finished processing neighbors of node ${d}`)}k(s),I(d=>d+1)},U=()=>{let s={...o};for(;!s.completed;){const{d:n,w:c,q:m,paths:l,p_r:i,p_w:a}=s;if(s.stepType==="queue_check")if(i===a){s.completed=!0;break}else s.currentNode=m[i],s.p_r=i+1,s.neighborIndex=0,s.stepType="process_neighbors";else if(s.stepType==="process_neighbors"){const r=s.currentNode,d=h[r];if(s.neighborIndex<d.length){const p=d[s.neighborIndex];n[p]===-1?(n[p]=n[r]+1,c[p]=c[r],l[p]=[r],m[s.p_w]=p,s.p_w=s.p_w+1):n[p]===n[r]+1&&(c[p]=c[p]+c[r],l[p]=[...l[p]||[],r]),s.neighborIndex++}else s.currentNeighbor=null,s.stepType="queue_check"}}s.stepDescriptions.push("Part 1 completed - all steps executed"),k(s),y("completed"),N("ready")},M=()=>{k(O()),I(0),y("ready"),N("disabled"),_({})},Y=()=>{const{q:s,paths:n,d:c}=o,m=Object.keys(h).length,l=new Set,i=new Set(Object.keys(h).map(Number)),a=new Set;Object.values(n).forEach(t=>{t.forEach(S=>a.add(S))}),i.forEach(t=>{a.has(t)||l.add(t)});const r=Array(m).fill(0);l.forEach(t=>{r[t]=1});const p=[...s.filter(t=>t!==-1)].reverse();return{leaves:l,x:r,reversedQueue:p,currentIndex:0,currentNode:null,nb:[],completed:!1,stepDescriptions:[`Found leaves: {${Array.from(l).join(", ")}}`]}},[f,_]=u.useState({}),G=()=>{const s=Y();_(s),N("running")},H=()=>{const s={...f},{reversedQueue:n,currentIndex:c,leaves:m,x:l}=s,{paths:i,w:a}=o;if(c>=n.length){s.completed=!0,s.stepDescriptions.push("Part 2 completed"),N("completed");return}const r=n[c];if(s.currentNode=r,m.has(r))s.stepDescriptions.push(`Node ${r} is a leaf, skip`),s.currentIndex++;else{const d=[];Object.keys(i).forEach(t=>{const S=parseInt(t);i[S]&&i[S].includes(r)&&d.push(S)}),s.nb=d;let p=0;d.forEach(t=>{p+=l[t]*a[r]/a[t]}),l[r]=1+p,s.stepDescriptions.push(`Node ${r}: nb=[${d.join(", ")}], x[${r}] = 1 + Σ(x[j]*w[${r}]/w[j]) = ${l[r].toFixed(2)}`),s.currentIndex++}_(s)},K=()=>{_({}),N("ready")},X=()=>{const{currentNode:s,currentNeighbor:n}=o,c=f.currentNode,m=f.nb||[];return e.jsxs("svg",{width:"300",height:"300",className:"border border-gray-300",children:[Object.entries(h).map(([l,i])=>i.map(a=>{const r=x[parseInt(l)],d=x[a];return e.jsx("line",{x1:r.x,y1:r.y,x2:d.x,y2:d.y,stroke:"#666",strokeWidth:"2"},`${l}-${a}`)})),Object.keys(h).map(l=>{const i=parseInt(l),a=x[i];let r="#e5e7eb";return g==="running"||g==="ready"?i===s?r="#ef4444":i===n?r="#f97316":o.q&&o.q.includes(i)&&o.q[o.q.indexOf(i)]!==-1&&(r="#eab308"):j==="running"&&(i===c?r="#ef4444":m.includes(i)&&(r="#22c55e")),e.jsxs("g",{children:[e.jsx("circle",{cx:a.x,cy:a.y,r:"20",fill:r,stroke:"#374151",strokeWidth:"2"}),e.jsx("text",{x:a.x,y:a.y+5,textAnchor:"middle",className:"font-bold",fontSize:"14",children:i})]},i)})]})};return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Betweenness Centrality Algorithm"}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Algorithm Overview"}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Note:"})," This algorithm computes betweenness centrality for all nodes with respect to a ",e.jsx("em",{children:"single starting node"}),". To compute overall betweenness centrality, this process must be repeated for every possible starting node and the scores summed."]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Computational Complexity:"})," O(n(m+n)) in general, O(n²) for sparse networks, where n = nodes, m = edges."]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"font-semibold",children:"Part 1: Modified BFS"}),e.jsxs("ol",{className:"list-decimal list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"Initialize distance array d, weight array w, queue q (all length n, filled with -1), paths dictionary, p_r=0, p_w=1"}),e.jsx("li",{children:"Set d[s]=0, w[s]=1, q[0]=s"}),e.jsx("li",{children:"If p_r == p_w, stop; else get node i = q[p_r], increment p_r"}),e.jsxs("li",{children:["For each neighbor j of i:",e.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1",children:[e.jsx("li",{children:"If d[j]==-1: set d[j]=d[i]+1, w[j]=w[i], paths[j]=[i], q[p_w]=j, increment p_w"}),e.jsx("li",{children:"If d[j]==d[i]+1: set w[j]=w[j]+w[i], paths[j]=paths[j]+[i]"}),e.jsx("li",{children:"Otherwise: do nothing"})]})]}),e.jsx("li",{children:"Repeat from step 3"})]}),e.jsx("h3",{className:"font-semibold mt-4",children:"Part 2: Score Calculation"}),e.jsxs("ol",{className:"list-decimal list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:'Find "leaf" nodes (nodes not appearing as values in paths dictionary)'}),e.jsx("li",{children:"Initialize score array x. Set x[l]=1 for each leaf l"}),e.jsxs("li",{children:["For each node i in reversed queue order:",e.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1",children:[e.jsx("li",{children:"If i is a leaf, continue"}),e.jsx("li",{children:"Find neighbors nb that precede i on shortest paths to s"}),e.jsx("li",{children:"Set x[i] = 1 + Σ(x[j] * w[i]/w[j]) for j ∈ nb"})]})]})]})]})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("label",{className:"font-semibold",children:"Starting Node (s):"}),e.jsx("select",{value:v,onChange:s=>b(parseInt(s.target.value)),className:"border rounded px-2 py-1",children:Object.keys(h).map(s=>e.jsxs("option",{value:s,children:["Node ",s]},s))})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:J,disabled:g==="completed"||o.completed,className:"px-4 py-2 bg-blue-500 text-white rounded disabled:bg-gray-300",children:"Step Part 1"}),e.jsx("button",{onClick:U,disabled:g==="completed"||o.completed,className:"px-4 py-2 bg-green-500 text-white rounded disabled:bg-gray-300",children:"Run All Part 1"}),e.jsx("button",{onClick:M,className:"px-4 py-2 bg-gray-500 text-white rounded",children:"Reset Part 1"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j==="ready"?G():H(),disabled:j==="disabled"||f.completed,className:"px-4 py-2 bg-purple-500 text-white rounded disabled:bg-gray-300",children:j==="ready"?"Start Part 2":"Step Part 2"}),e.jsx("button",{onClick:K,disabled:j==="disabled",className:"px-4 py-2 bg-gray-500 text-white rounded disabled:bg-gray-300",children:"Reset Part 2"})]}),j==="disabled"&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Part 2 controls are disabled until Part 1 is completed."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Network Visualization"}),X(),e.jsx("div",{className:"mt-2 text-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{children:"Current Node"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),e.jsx("span",{children:"Current Neighbor"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{children:"In Queue"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{children:"Preceding Neighbor"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Algorithm State"}),g!=="initial"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Part 1 Variables"}),e.jsx("div",{className:"text-sm bg-white p-3 rounded border",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"d (distance):"})," [",(q=o.d)==null?void 0:q.join(", "),"]"]}),e.jsxs("div",{className:j!=="disabled"?"bg-yellow-200":"",children:[e.jsx("strong",{children:"w (weight):"})," [",(C=o.w)==null?void 0:C.join(", "),"]"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"q (queue):"})," [",(T=o.q)==null?void 0:T.join(", "),"]"]})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"p_r:"})," ",o.p_r]}),e.jsxs("div",{children:[e.jsx("strong",{children:"p_w:"})," ",o.p_w]}),e.jsxs("div",{className:j!=="disabled"?"bg-yellow-200":"",children:[e.jsx("strong",{children:"paths:"})," ",JSON.stringify(o.paths||{})]})]})]})})]}),j!=="disabled"&&Object.keys(f).length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Part 2 Variables"}),e.jsxs("div",{className:"text-sm bg-white p-3 rounded border",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"leaves:"})," ","{"+Array.from(f.leaves||[]).join(", ")+"}"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"x (scores):"})," [",($=f.x)==null?void 0:$.map(s=>s.toFixed(2)).join(", "),"]"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"nb (preceding neighbors):"})," [",(A=f.nb)==null?void 0:A.join(", "),"]"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"reversed queue:"})," [",(E=f.reversedQueue)==null?void 0:E.join(", "),"]"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Step-by-Step Description"}),e.jsxs("div",{className:"text-sm bg-white p-3 rounded border max-h-60 overflow-y-auto",children:[(R=o.stepDescriptions)==null?void 0:R.map((s,n)=>e.jsxs("div",{className:"mb-1",children:[n+1,". ",s]},n)),(F=f.stepDescriptions)==null?void 0:F.map((s,n)=>e.jsxs("div",{className:"mb-1 text-purple-700",children:["P2-",n+1,". ",s]},`p2-${n}`))]})]})]})]})]})}});
